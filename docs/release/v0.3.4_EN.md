# devgen v0.3.4 Release Notes

## ðŸš€ New Features

### Unified AI Rules Management

- **Project-level Rules Configuration**: Added `.devgen/rules/` directory support for custom project AI rules
- **Configurable Rule Loading**: Control rule sources through `[rules]` configuration in `devgen.toml`
- **Batch IDE Generation**: Support `--agent all` to generate rules for all IDEs at once
- **Rule File Parser**: Added Markdown + YAML frontmatter parsing support

## ðŸ”§ Improvements

### Adapter System Optimization

- **Kiro Adapter**: Fixed `fileMatchPattern` handling logic, added `description` field support
- **CodeBuddy/Cursor Adapters**: Don't generate `globs` field when empty, avoiding invalid configuration
- **Default Match Pattern**: Kiro defaults to match all files (`**/*`) in fileMatch mode

### Rules Management Refactoring

- **Directory Migration**: Migrated project rules from individual IDE directories to unified `.devgen/rules/`
- **Conditional Loading**: Only load project rules when `source_dir` is explicitly configured
- **Built-in Rules Control**: Control inclusion of devgen built-in rules via `include_builtin` option

## ðŸ“ Configuration Examples

### devgen.toml Configuration

```toml
[rules]
# Project rules directory (optional)
source_dir = ".devgen/rules"
# Whether to include built-in rules (default true)
include_builtin = true
```

### Project Rule File Format

```markdown
---
description: Custom rule description
globs:
  - "**/*.go"
  - "**/*.ts"
alwaysApply: false
---

# Rule Title

Rule content...
```

## ðŸ› ï¸ Usage

```bash
# Generate rules for all IDEs
devgen rules --agent all -w

# Generate rules for specific IDE
devgen rules --agent kiro -w
devgen rules --agent codebuddy -w
devgen rules --agent cursor -w

# Preview rule content (no file writes)
devgen rules --agent kiro
```

## ðŸ“Š Technical Details

- **New Files**: `genkit/rule_loader.go`, `genkit/rule_loader_test.go`
- **Configuration Extension**: Added `RulesConfig` struct to `genkit/config.go`
- **Test Coverage**: Added 325 lines of test code ensuring functionality stability
- **Documentation Update**: README updated with AI Rules feature description

## ðŸ”„ Migration Guide

### Upgrading from v0.3.3

1. **Automatic Migration**: Existing IDE rule files have been automatically cleaned up
2. **Optional Configuration**: No need to modify existing configuration, default behavior remains unchanged
3. **New Feature Activation**: To use project rules, configure `[rules]` section in `devgen.toml`

### Project Rules Setup

```bash
# 1. Create rules directory
mkdir -p .devgen/rules

# 2. Add configuration to devgen.toml
echo '[rules]' >> devgen.toml
echo 'source_dir = ".devgen/rules"' >> devgen.toml

# 3. Create custom rule files
# Add .md files in .devgen/rules/

# 4. Generate IDE rules
devgen rules --agent all -w
```

---

**Full Changelog**: [v0.3.3...v0.3.4](https://github.com/tlipoca9/devgen/compare/v0.3.3...v0.3.4)