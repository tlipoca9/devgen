# v0.3.1 Release Notes

## New Features

### 1. Automatic Test File Generation (`--include-tests`)

New `--include-tests` command-line flag that makes devgen generate test files alongside the generated code.

```bash
devgen --include-tests ./...
```

**genkit Framework Changes:**
- Added `IncludeTests` field to `Options`
- Added `IncludeTests()` method to `Generator` for tools to check if test generation is requested

**enumgen Generated Test Files (`*_enum_test.go`):**
- `Test<Type>_IsValid` - Tests validity of all enum values
- `Test<Type>_String` - Tests String() method (if enabled)
- `Test<Type>Enums_List` - Verifies List() returns correct enum values
- `Test<Type>Enums_Names` - Verifies Names() returns correct name list
- `Test<Type>Enums_Name` - Tests Name() method
- `Test<Type>Enums_ContainsName` - Tests ContainsName() method
- JSON/Text/SQL serialization tests (if corresponding options enabled)

**validategen Generated Test Files (`*_validate_test.go`):**
- Generates table-driven tests for each validated type
- Auto-generates valid and invalid test cases
- Supports tests for `@required`, `@gt`, `@lt`, `@gte`, `@lte`, `@email`, `@url` and other rules

**validategen Internal Refactoring:**
- Split `Validate()` method into three parts:
  - `_validate()` - Field-level validations (excluding `@method`)
  - `_validateMethod()` - `@method` validations only
  - `Validate()` - Combines the above + `postValidate()`
- This separation allows testing field validations independently without setting up nested types

### 2. VSCode Extension AI Rules Generation Prompt

When opening a Go project in an AI IDE (like CodeBuddy), the extension now asks whether to generate `.codebuddy/rules/` files:

- **Generate** - Generate this time
- **Always Generate** - Save to workspace settings, auto-generate in future
- **Don't Ask Again** - Save to workspace settings, never ask again

Configuration: `devgen.rules.autoGenerate` (options: `ask`, `always`, `never`)

### 3. Duration Validation Code Readability

validategen now generates duration comparisons using `time.Duration` constants for better readability:

```go
// Before
if d < 1000000000 { // 1s
    return errors.New("...")
}

// Now
if d < 1*time.Second {
    return errors.New("...")
}
```

## Improvements

### Makefile Changes

- Added `generate` target that runs `go run ./cmd/devgen --include-tests ./...`
- `all` target now includes `generate` step: `tidy â†’ generate â†’ lint â†’ test â†’ build`
- `test` target adds `--keep-going` flag to continue running other tests after failures

### Plugin Loading Log Optimization

```
# Before
Loaded plugin: markgen

# Now
ðŸ“‚  [LOAD] Loaded 1 plugin(s)
           â€¢ 'markgen'
```
