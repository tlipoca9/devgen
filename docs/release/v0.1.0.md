# Release v0.1.0

**发布日期**: 2025-12-07

## 概述

devgen 首次发布！这是一个 Go 代码生成工具集，通过注解自动生成样板代码，减少手写重复代码的工作量。

## enumgen - 枚举代码生成器

为 Go 枚举类型自动生成序列化、反序列化和验证方法，告别手写繁琐的 `String()`、`MarshalJSON()` 等方法。

### 使用方式

1. 添加注解：

```go
// Status 表示状态
// enumgen:@enum(string, json, sql)
type Status int

const (
    StatusPending Status = iota + 1
    StatusActive
    // enumgen:@name(Cancelled)
    StatusCanceled  // 自定义名称
)
```

2. 运行代码生成：

```bash
enumgen ./...
```

### 功能特性

| 注解 | 说明 |
|------|------|
| `@enum(string)` | 生成 `String()` 方法 |
| `@enum(json)` | 生成 `MarshalJSON()` / `UnmarshalJSON()` |
| `@enum(text)` | 生成 `MarshalText()` / `UnmarshalText()` |
| `@enum(sql)` | 生成 `Value()` / `Scan()` 用于数据库操作 |
| `@name(Name)` | 自定义枚举值的字符串名称 |

### 生成的辅助方法

自动生成 `{Type}Enums` 辅助变量，提供：
- `IsValid()` - 验证枚举值是否有效
- `List()` - 返回所有有效枚举值
- `Parse(s)` - 从字符串解析枚举
- `Name(v)` - 获取枚举值的字符串名称
- `Contains(v)` / `ContainsName(s)` - 检查值或名称是否有效

---

## validategen - 验证代码生成器

为 Go 结构体自动生成 `Validate()` 方法，通过注解声明验证规则，无需手写验证逻辑。

### 使用方式

1. 添加注解：

```go
// User 用户模型
// validategen:@validate
type User struct {
    // validategen:@required
    // validategen:@min(2)
    // validategen:@max(50)
    Name string

    // validategen:@required
    // validategen:@email
    Email string

    // validategen:@gte(0)
    // validategen:@lte(150)
    Age int

    // validategen:@oneof(admin, user, guest)
    Role string
}
```

2. 运行代码生成：

```bash
validategen ./...
```

### 验证注解一览

| 类别 | 注解 | 说明 |
|------|------|------|
| **必填** | `@required` | 字段不能为空/零值 |
| **范围** | `@min(n)` `@max(n)` | 数值范围或长度限制 |
| | `@len(n)` | 精确长度 |
| | `@gt(n)` `@gte(n)` `@lt(n)` `@lte(n)` | 大于/小于比较 |
| **等值** | `@eq(v)` `@ne(v)` | 等于/不等于 |
| | `@oneof(a, b, c)` | 必须是指定值之一 |
| **格式** | `@email` `@url` `@uuid` | 常用格式验证 |
| | `@ip` `@ipv4` `@ipv6` | IP 地址验证 |
| **字符** | `@alpha` `@alphanum` `@numeric` | 字符类型限制 |
| **字符串** | `@contains(s)` `@excludes(s)` | 包含/不包含子串 |
| | `@startswith(s)` `@endswith(s)` | 前缀/后缀匹配 |
| **正则** | `@regex(pattern)` | 自定义正则表达式 |
| **数据格式** | `@format(json\|yaml\|toml\|csv)` | 验证数据格式 |
| **嵌套** | `@method(MethodName)` | 调用嵌套结构体的验证方法 |

### 高级特性

- **postValidate 钩子**: 定义 `postValidate(errs []string) error` 方法实现自定义验证逻辑
- **多规则组合**: 一个字段可同时使用多个验证注解
- **详细错误信息**: 错误信息包含字段名和实际值，便于调试

---

## vscode-devgen - VSCode 扩展

提供 devgen 注解的编辑器支持：
- 语法高亮
- 注解自动补全
- 参数验证提示

---

## 安装

### 安装 devgen

```bash
# 安装 devgen 工具, 支持所有 devgen tool（包括 enumgen, validategen）
go install github.com/tlipoca9/devgen/cmd/devgen@latest

# usage
devgen ./...
```


### 安装单个工具
```bash
go install github.com/tlipoca9/devgen/cmd/enumgen@latest
go install github.com/tlipoca9/devgen/cmd/validategen@latest

# usage
enumgen ./...
validategen ./...
```
